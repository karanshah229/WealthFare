"use strict";jQuery(document).ready(function(d){var l,u,e=!1;function h(){e=!1,d("#shared-counts-modal-recipient, #shared-counts-modal-name, #shared-counts-modal-email").val(""),d("#shared-counts-modal-wrap").fadeOut(),d("#shared-counts-modal-sent").hide()}d(document).on("click",".shared-counts-button",function(){if(shared_counts.social_tracking){var a=d(this),e=a.data("social-network"),t=a.data("social-action"),o=a.data("social-target");e&&t&&o&&("function"==typeof ga?ga("send","social",e,t,o):"function"==typeof __gaTracker&&__gaTracker("send","social",e,t,o))}}),d(document).on("click",'.shared-counts-button[target="_blank"]:not(.no-js)',function(a){a.preventDefault();var e="",t=this.href;switch(t.split("/")[2]){case"www.facebook.com":e="width=585,height=368";break;case"twitter.com":e="width=585,height=261";break;case"pinterest.com":e="width=750,height=550";break;default:e="width=585,height=515"}window.open(t,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,"+e),d(this).trigger("shared-counts-click")}),d(document).on("click",'a[href*="#shared-counts-email"]',function(a){a.preventDefault(),e=!0,d("#shared-counts-modal-wrap").fadeIn(),d("#shared-counts-modal-recipient").focus(),l=d(this).data("postid"),u=d(this).data("nonce"),shared_counts.recaptchaSitekey&&grecaptcha.render("shared-counts-modal-recaptcha",{sitekey:shared_counts.recaptchaSitekey})}),d(document).on("click","#shared-counts-modal-close, #shared-counts-modal-wrap",function(a){("shared-counts-modal-wrap"!==d(this).attr("id")||d(a.target).is("#shared-counts-modal-wrap"))&&(a.preventDefault(),h())}),d(document).keyup(function(a){e&&27===a.keyCode&&h()}),d(document).on("click","#shared-counts-modal-submit",function(a){a.preventDefault();var e=!1,t=d(this),o=d("#shared-counts-modal-recipient"),s=d("#shared-counts-modal-name"),n=d("#shared-counts-modal-email"),c=d("#shared-counts-modal-validation"),i=d("#g-recaptcha-response"),r={action:"shared_counts_email",postid:l,recipient:o.val(),name:s.val(),email:n.val(),validation:c.val(),recaptcha:i.val(),nonce:u};d(o,s,n).each(function(){d(this).val()&&""!==d(this).val()||(e=!0)}),e?alert(shared_counts.email_fields_required):(d(this).prop("disabled",!0),d.post(shared_counts.ajaxurl,r,function(a){a.success&&(console.log(shared_counts.email_sent),h()),t.prop("disabled",!1)}).fail(function(a){console.log(a.responseText)}))})});